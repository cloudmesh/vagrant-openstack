<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>DevStack &mdash; Cloudmesh 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Cloudmesh 0.1 documentation" href="index.html" />
    <link rel="next" title="Multiworker Devstack for Vagrant" href="multi.html" />
    <link rel="prev" title="Adding to the Documentation" href="doc.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><img src="_static/fg-logo-white-24x36.png">
          Cloudmesh</a>
        <span class="navbar-text navbar-version pull-left"><b>0.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html#links">Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc.html">Adding to the Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="doc.html#creating-the-documentation-locally">Creating the documentation locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="doc.html#rst-documentation">RST Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="doc.html#gh-pages">gh-pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="doc.html#published-documentation">Published Documentation</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">DevStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi.html">Multiworker Devstack for Vagrant</a><ul>
<li class="toctree-l2"><a class="reference internal" href="multi.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi.html#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi.html#testing-the-setup">Testing the setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi.html#shell-scripts">Shell Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="multi.html#controller-install-controller-sh">Controller: install-controller.sh</a></li>
<li class="toctree-l3"><a class="reference internal" href="multi.html#compute-install-compute-sh">Compute: install-compute.sh</a></li>
<li class="toctree-l3"><a class="reference internal" href="multi.html#vagrantfile">Vagrantfile</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="multiUsingChef.html">Multi worker DevStack using Vagrant and Chef Cookbooks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="multiUsingChef.html#openstack-distributions">OpenStack Distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiUsingChef.html#multi-node-openstack-install">Multi-Node OpenStack Install</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scheduler.html">Changing the scheduler in openstack</a><ul>
<li class="toctree-l2"><a class="reference internal" href="scheduler.html#important-directories-files">Important directories/files</a></li>
<li class="toctree-l2"><a class="reference internal" href="scheduler.html#creating-a-brand-new-scheduler">Creating a brand new scheduler.</a><ul>
<li class="toctree-l3"><a class="reference internal" href="scheduler.html#changes-to-the-configuration-file">Changes to the configuration file:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="scheduler.html#testing-the-scheduler">Testing the scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="scheduler.html#using-the-filtered-scheduler-and-building-a-new-custom-filter">Using the filtered scheduler and building a new custom filter:</a><ul>
<li class="toctree-l3"><a class="reference internal" href="scheduler.html#modifying-the-config-file">Modifying the Config file</a></li>
<li class="toctree-l3"><a class="reference internal" href="scheduler.html#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="scheduler.html#code">Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="scheduler.html#summary">Summary</a><ul>
<li class="toctree-l3"><a class="reference internal" href="scheduler.html#deployment-building-a-new-scheduler">Deployment: Building a new scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="scheduler.html#deployment-using-existing-filtered-scheduler-with-new-filters">Deployment - Using existing filtered scheduler with new filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="scheduler.html#id6">Testing:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vagrant.html">Vagrant</a><ul>
<li class="toctree-l2"><a class="reference internal" href="vagrant.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="vagrant.html#commands">Commands</a></li>
</ul>
</li>
</ul>
<ul class="simple">
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">DevStack</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="doc.html" title="Previous Chapter: Adding to the Documentation"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Adding to the Do...</span>
    </a>
  </li>
  <li>
    <a href="multi.html" title="Next Chapter: Multiworker Devstack for Vagrant"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Multiworker Devs... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/devstack.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="devstack">
<h1>DevStack<a class="headerlink" href="#devstack" title="Permalink to this headline">Â¶</a></h1>
<p>We asume you have virtualbox and vagrant installed. This procedure will guide you to install OpenStack using DevStack. The procedure will be carried out using Shell Script Provisioner available with Vagrant. There are other standard Provisioning tools such as Chef and Puppet available. For now we will use the Shell Script Provisioner for ease of use. The steps to be followed in a nutshell is given below:</p>
<ul class="simple">
<li>Have Virtual Box and Vagrant installed</li>
<li>Create Vagrantfile using <strong>vagrant init</strong> command</li>
<li>Create a shell script named <strong>install.sh</strong> (or a different name) with the steps to install OpenStack</li>
<li>Amend the Vagrantfile to call the script</li>
</ul>
<p>The install.sh script is shown below:</p>
<div class="highlight-python"><div class="highlight"><pre>#!/bin/bash
#################################################################################################################
# Author        : Aravindh Varadharaju
# Date          : 6th March 2014
# Description   : I was strugging with running the stack.sh file as a vagrant user. Though I run the file using
#                 &quot;sudo su vagrant&quot; the installation of devstack setup was failing with an error &quot;/root/.my.cnf&quot;
#                 permission denied. I was looking for a solution and the below mentioned site had a solution to
#                 run certain parts as root and certain parts as vagrant. This was really a blessing.
# Script source : http://stackoverflow.com/questions/16768777/can-i-switch-user-in-vagrant-bootstrap-shell-script
#################################################################################################################
case $(id -u) in
 0)
  sudo ufw disable
  sudo apt-get -q -y update
  sudo apt-get install -y git
  sudo apt-get install -y python-pip
  # sudo pip install -q netaddr
  git clone https://github.com/openstack-dev/devstack.git
  chown -R vagrant:vagrant devstack
  cd devstack
  echo ADMIN_PASSWORD=1qaz2wsx &gt; localrc
  echo MYSQL_PASSWORD=1qaz2wsx &gt;&gt; localrc
  echo RABBIT_PASSWORD=1qaz2wsx &gt;&gt; localrc
  echo SERVICE_PASSWORD=1qaz2wsx &gt;&gt; localrc
  echo SERVICE_TOKEN=1qaz2wsx &gt;&gt; localrc
  source localrc
  sudo -u vagrant -i $0  # script calling itself as the vagrant user
 *)
  cd /home/vagrant/devstack
  ./stack.sh
esac
</pre></div>
</div>
<p>The above script needs to be placed in the project directory where the Vagrantfile is present. The next task is to modify the Vagrant file to call the shell script just created.</p>
<p>Add the following line to the Vagrantfile:</p>
<div class="highlight-python"><div class="highlight"><pre>config.vm.provision &quot;shell&quot;, path: &quot;install.sh&quot;
</pre></div>
</div>
<p>Once the file is saved, run the following commands to rebuilt the VM through Vagrant:</p>
<div class="highlight-python"><div class="highlight"><pre>vagrant destroy
vagrant up
</pre></div>
</div>
<p>This would take some time to run as OpenStack installation takes around 10 - 15 minutes.</p>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, Gregor von Laszewski for  FutureGrid.<br/>
    </p>
  </div>
</footer>
  </body>
</html>